<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAHAIÂ·ç§äººå½±é™¢ | æ²‰æµ¸å¼è§‚å½±ä½“éªŒ</title>
    <style>
        /* ä¿æŒåŸæœ‰çš„æ‰€æœ‰æ ·å¼ä¸å˜ï¼Œåªæ·»åŠ å¿…è¦çš„åŠ è½½çŠ¶æ€æ ·å¼ */
        
        /* æœç´¢ä¸‹æ‹‰å»ºè®®æ¡† */
        .suggestions-box {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(20, 20, 30, 0.95);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 0 0 15px 15px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 100;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .suggestion-item {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .suggestion-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }
        
        .suggestion-img {
            width: 60px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }
        
        .suggestion-title {
            font-weight: 500;
            color: var(--light);
        }
        
        .suggestion-type {
            font-size: 0.8rem;
            color: var(--primary);
            background: rgba(0, 212, 255, 0.1);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }
        
        /* è§†é¢‘åŠ è½½çŠ¶æ€ */
        .video-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            gap: 2rem;
        }
        
        .loading-text {
            color: var(--primary);
            font-size: 1.2rem;
            animation: pulse 2s infinite;
        }
        
        /* åˆ†ç±»ç­›é€‰å™¨ */
        .category-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
            padding: 0 2rem;
        }
        
        .filter-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.1);
            color: var(--light);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .filter-btn.active {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-color: transparent;
        }
        
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* åˆ†é¡µæ§ä»¶ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 3rem 0;
            padding: 0 2rem;
        }
        
        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .page-btn.active {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-color: transparent;
        }
        
        .page-btn:hover:not(.active) {
            background: rgba(0, 212, 255, 0.1);
        }
        
        /* è§†é¢‘ä¿¡æ¯æ ‡ç­¾ */
        .video-tags {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .video-tag {
            background: rgba(0, 212, 255, 0.1);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }
        
        /* è§†é¢‘ç»Ÿè®¡ä¿¡æ¯ */
        .video-stats {
            display: flex;
            gap: 1rem;
            margin: 0.5rem 0;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- èƒŒæ™¯ç²’å­ -->
    <div id="particles-js"></div>

    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="logo">DAHAI CINEMA</div>
        <div class="nav-center">
            <a href="#" class="nav-item active" data-category="all"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <a href="#" class="nav-item" data-category="movie"><i class="fas fa-film"></i> ç”µå½±</a>
            <a href="#" class="nav-item" data-category="tv"><i class="fas fa-tv"></i> å‰§é›†</a>
            <a href="#" class="nav-item" data-category="anime"><i class="fas fa-gamepad"></i> åŠ¨æ¼«</a>
            <a href="#" class="nav-item" data-category="variety"><i class="fas fa-star"></i> ç»¼è‰º</a>
        </div>
        <div class="user-menu">
            <button class="nav-item" id="userBtn"><i class="fas fa-user"></i> å¤§æµ·</button>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main>
        <!-- è‹±é›„åŒºåŸŸ -->
        <section class="hero">
            <h1 class="hero-title floating">æ²‰æµ¸å¼ç§äººè§‚å½±ä½“éªŒ</h1>
            <p class="hero-subtitle">
                ç›´æ¥æ¥å…¥æµ·é‡å½±è§†èµ„æº Â· å®æ—¶æœç´¢æ’­æ”¾ Â· ä¸ªæ€§åŒ–æ¨è
            </p>
            
            <!-- æœç´¢æ¡† -->
            <div class="search-container">
                <input type="text" 
                       class="search-box" 
                       placeholder="æœç´¢ç”µå½±ã€å‰§é›†ã€åŠ¨æ¼«ã€æ¼”å‘˜..." 
                       id="searchInput"
                       autocomplete="off">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i> æœç´¢
                </button>
                <div class="suggestions-box" id="suggestionsBox"></div>
            </div>
            
            <!-- å¿«é€Ÿåˆ†ç±» -->
            <div class="category-filters">
                <button class="filter-btn active" data-category="all">
                    <i class="fas fa-fire"></i> çƒ­é—¨æ¨è
                </button>
                <button class="filter-btn" data-category="movie">
                    <i class="fas fa-film"></i> æœ€æ–°ç”µå½±
                </button>
                <button class="filter-btn" data-category="tv">
                    <i class="fas fa-tv"></i> çƒ­æ’­å‰§é›†
                </button>
                <button class="filter-btn" data-category="anime">
                    <i class="fas fa-gamepad"></i> çƒ­é—¨åŠ¨æ¼«
                </button>
                <button class="filter-btn" data-category="variety">
                    <i class="fas fa-star"></i> çƒ­é—¨ç»¼è‰º
                </button>
            </div>
        </section>

        <!-- è§†é¢‘ç½‘æ ¼ -->
        <div id="videoContent">
            <h2 class="section-title">
                <i class="fas fa-fire"></i> ä»Šæ—¥çƒ­é—¨æ¨è
            </h2>
            <div class="movies-grid" id="moviesGrid">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <!-- åŠ è½½åŠ¨ç”» -->
            <div class="loader" id="loader"></div>
            
            <!-- åˆ†é¡µæ§ä»¶ -->
            <div class="pagination" id="pagination">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </main>

    <!-- è§†é¢‘æ’­æ”¾å™¨æ¨¡æ€æ¡† -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">æ­£åœ¨æ’­æ”¾</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="video-container" id="videoContainer">
                <!-- è§†é¢‘å°†åœ¨è¿™é‡ŒåŠ è½½ -->
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>DAHAI CINEMA</h3>
                <p>åŸºäºGitHub Pagesçš„å½±è§†èšåˆå¹³å°ï¼Œæ¥å…¥æµ·é‡å½±è§†èµ„æºã€‚</p>
                <div class="social-links">
                    <a href="https://github.com" class="social-link"><i class="fab fa-github"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-weibo"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-discord"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>æ•°æ®æ¥æº</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-database"></i> è§†é¢‘èµ„æºAPI</a></li>
                    <li><a href="#"><i class="fas fa-server"></i> å®æ—¶æ•°æ®åŒæ­¥</a></li>
                    <li><a href="#"><i class="fas fa-cloud"></i> äº‘ç«¯èµ„æºåº“</a></li>
                    <li><a href="#"><i class="fas fa-sync-alt"></i> æ¯æ—¥æ›´æ–°</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>æŠ€æœ¯æ”¯æŒ</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-code"></i> GitHub Pages</a></li>
                    <li><a href="#"><i class="fas fa-wifi"></i> APIä»£ç†æœåŠ¡</a></li>
                    <li><a href="#"><i class="fas fa-shield-alt"></i> å®‰å…¨åŠ å¯†</a></li>
                    <li><a href="#"><i class="fas fa-bolt"></i> CDNåŠ é€Ÿ</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 DAHAIç§äººå½±é™¢. è§†é¢‘èµ„æºæ¥æºäºäº’è”ç½‘å…¬å¼€å†…å®¹ï¼Œä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ã€‚
            <br>
            æœ¬ç½‘ç«™ä¸å­˜å‚¨ä»»ä½•è§†é¢‘èµ„æºï¼Œæ‰€æœ‰å†…å®¹å‡é€šè¿‡APIå®æ—¶è·å–ã€‚
        </div>
    </footer>

    <!-- è„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // ==================== é…ç½®éƒ¨åˆ† ====================
        const CONFIG = {
            // APIé…ç½® - ä½¿ç”¨ä»£ç†APIè§£å†³è·¨åŸŸé—®é¢˜
            API_BASE: 'https://api.allorigins.win/raw?url=',
            
            // è§†é¢‘æºAPIï¼ˆè¿™é‡Œä½¿ç”¨ç¤ºä¾‹APIï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢ï¼‰
            VIDEO_SOURCES: {
                // ç”µå½±APIï¼ˆç¤ºä¾‹ï¼‰
                MOVIE_API: 'https://api.themoviedb.org/3/movie/popular?api_key=YOUR_API_KEY&language=zh-CN',
                
                // å‰§é›†APIï¼ˆç¤ºä¾‹ï¼‰
                TV_API: 'https://api.themoviedb.org/3/tv/popular?api_key=YOUR_API_KEY&language=zh-CN',
                
                // åŠ¨æ¼«APIï¼ˆç¤ºä¾‹ - ä½¿ç”¨AniList APIï¼‰
                ANIME_API: 'https://graphql.anilist.co',
                
                // Bç«™è§†é¢‘æœç´¢ï¼ˆé€šè¿‡ä»£ç†ï¼‰
                BILIBILI_SEARCH: 'https://api.bilibili.com/x/web-interface/search/all/v2?keyword=',
                
                // ç»¼åˆæœç´¢APIï¼ˆå®é™…ä½¿ç”¨æ—¶å¯ä»¥æ¥å…¥è‡ªå·±çš„åç«¯ï¼‰
                SEARCH_API: 'https://your-backend.com/api/search?q='
            },
            
            // é»˜è®¤è§†é¢‘æ•°æ®ï¼ˆå¤‡ç”¨ï¼‰
            DEFAULT_VIDEOS: [
                {
                    id: 1,
                    title: "æµæµªåœ°çƒ2",
                    year: "2023",
                    rating: 8.8,
                    duration: "173åˆ†é’Ÿ",
                    type: "movie",
                    category: ["ç§‘å¹»", "ç¾éš¾"],
                    cover: "https://image.tmdb.org/t/p/w500/5AG9QWKpQ3kQdI5L3fKkYk5q4z0.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/5AG9QWKpQ3kQdI5L3fKkYk5q4z0.jpg",
                    description: "å¤ªé˜³å³å°†æ¯ç­ï¼Œäººç±»åœ¨åœ°çƒè¡¨é¢å»ºé€ å‡ºå·¨å¤§çš„æ¨è¿›å™¨ï¼Œå¯»æ‰¾æ–°çš„å®¶å›­ã€‚",
                    // Bç«™è§†é¢‘IDï¼ˆç¤ºä¾‹ï¼‰
                    bvid: "BV1fX4y1V7Vc",
                    // æ’­æ”¾é‡ã€å¼¹å¹•æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯
                    stats: {
                        views: "1.2äº¿",
                        danmaku: "45ä¸‡",
                        likes: "120ä¸‡"
                    }
                },
                {
                    id: 2,
                    title: "ä¸‰ä½“",
                    year: "2023",
                    rating: 9.0,
                    duration: "45åˆ†é’ŸÃ—30é›†",
                    type: "tv",
                    category: ["ç§‘å¹»", "å°è¯´æ”¹ç¼–"],
                    cover: "https://image.tmdb.org/t/p/w500/r2VhqZqXrqB8wq2C5q5Q5v5t5Z5.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/r2VhqZqXrqB8wq2C5q5Q5v5t5Z5.jpg",
                    description: "å¶æ–‡æ´åœ¨çº¢å²¸åŸºåœ°å‘å®‡å®™å‘é€ä¿¡å·ï¼Œä¸‰ä½“æ–‡æ˜æ¥æ”¶å¹¶å¼€å§‹å…¥ä¾µåœ°çƒã€‚",
                    bvid: "BV1cT411R7tY",
                    stats: {
                        views: "2.3äº¿",
                        danmaku: "85ä¸‡",
                        likes: "230ä¸‡"
                    }
                },
                {
                    id: 3,
                    title: "å’’æœ¯å›æˆ˜ ç¬¬äºŒå­£",
                    year: "2023",
                    rating: 9.2,
                    duration: "24åˆ†é’ŸÃ—23é›†",
                    type: "anime",
                    category: ["çƒ­è¡€", "æˆ˜æ–—", "å¥‡å¹»"],
                    cover: "https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx145064-Ub2aHlF5HdDA.jpg",
                    poster: "https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx145064-Ub2aHlF5HdDA.jpg",
                    description: "æ¶©è°·äº‹å˜åï¼Œè™æ–æ‚ ä»ä¸ä¼™ä¼´ä»¬é¢å¯¹æ›´å¼ºå¤§çš„è¯…å’’ã€‚",
                    bvid: "BV1Gu4y1U7YJ",
                    stats: {
                        views: "3.1äº¿",
                        danmaku: "210ä¸‡",
                        likes: "310ä¸‡"
                    }
                },
                {
                    id: 4,
                    title: "æ¼«é•¿çš„å­£èŠ‚",
                    year: "2023",
                    rating: 9.4,
                    duration: "50åˆ†é’ŸÃ—12é›†",
                    type: "tv",
                    category: ["æ‚¬ç–‘", "çŠ¯ç½ª", "å‰§æƒ…"],
                    cover: "https://image.tmdb.org/t/p/w500/8Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/8Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    description: "ä¸€æ¡©è·¨è¶Š20å¹´çš„æ‚¬æ¡ˆï¼Œæ”¹å˜äº†ä¸‰ä¸ªäººçš„å‘½è¿ã€‚",
                    bvid: "BV1No4y1Z7K8",
                    stats: {
                        views: "1.8äº¿",
                        danmaku: "65ä¸‡",
                        likes: "180ä¸‡"
                    }
                },
                {
                    id: 5,
                    title: "å°ç¥ç¬¬ä¸€éƒ¨",
                    year: "2023",
                    rating: 8.7,
                    duration: "148åˆ†é’Ÿ",
                    type: "movie",
                    category: ["ç¥è¯", "åŠ¨ä½œ", "å¥‡å¹»"],
                    cover: "https://image.tmdb.org/t/p/w500/9Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/9Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    description: "å•†ç‹æ®·å¯¿ä¸ç‹å¦–å¦²å·±å‹¾ç»“ï¼Œæ˜†ä»‘ä»™äººå§œå­ç‰™æº"å°ç¥æ¦œ"ä¸‹å±±ã€‚",
                    bvid: "BV1Nj411D7V4",
                    stats: {
                        views: "2.5äº¿",
                        danmaku: "95ä¸‡",
                        likes: "250ä¸‡"
                    }
                },
                {
                    id: 6,
                    title: "é¬¼ç­ä¹‹åˆƒ é”»åˆ€æ‘ç¯‡",
                    year: "2023",
                    rating: 9.3,
                    duration: "24åˆ†é’ŸÃ—11é›†",
                    type: "anime",
                    category: ["çƒ­è¡€", "æˆ˜æ–—", "å¥‡å¹»"],
                    cover: "https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx145001-5Z5Q5v5t5Z5.jpg",
                    poster: "https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx145001-5Z5Q5v5t5Z5.jpg",
                    description: "ç‚­æ²»éƒå‰å¾€é”»åˆ€æ‘ï¼Œä¸ä¸Šå¼¦ä¹‹å››å’Œä¸Šå¼¦ä¹‹äº”å±•å¼€æ¿€æˆ˜ã€‚",
                    bvid: "BV1No4y1Z7K9",
                    stats: {
                        views: "2.9äº¿",
                        danmaku: "185ä¸‡",
                        likes: "290ä¸‡"
                    }
                },
                {
                    id: 7,
                    title: "ç‹‚é£™",
                    year: "2023",
                    rating: 9.1,
                    duration: "45åˆ†é’ŸÃ—39é›†",
                    type: "tv",
                    category: ["çŠ¯ç½ª", "å‰§æƒ…", "æ‚¬ç–‘"],
                    cover: "https://image.tmdb.org/t/p/w500/1Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/1Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    description: "åˆ‘è­¦å®‰æ¬£ä¸é±¼è´©é«˜å¯å¼ºé•¿è¾¾20å¹´çš„æ­£é‚ªè¾ƒé‡ã€‚",
                    bvid: "BV1Nj411D7V5",
                    stats: {
                        views: "3.8äº¿",
                        danmaku: "120ä¸‡",
                        likes: "380ä¸‡"
                    }
                },
                {
                    id: 8,
                    title: "èœ˜è››ä¾ ï¼šçºµæ¨ªå®‡å®™",
                    year: "2023",
                    rating: 9.0,
                    duration: "140åˆ†é’Ÿ",
                    type: "movie",
                    category: ["åŠ¨ç”»", "åŠ¨ä½œ", "ç§‘å¹»"],
                    cover: "https://image.tmdb.org/t/p/w500/2Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    poster: "https://image.tmdb.org/t/p/w500/2Q6Z5Q5v5t5Z5q5Q5r5q5Q5v5t5Z5.jpg",
                    description: "è¿ˆå°”æ–¯Â·è«æ‹‰è±æ–¯ç©¿æ¢­å¤šå…ƒå®‡å®™ï¼Œä¸èœ˜è››ä¾ 2099å±•å¼€å¯¹å†³ã€‚",
                    bvid: "BV1Nj411D7V6",
                    stats: {
                        views: "1.5äº¿",
                        danmaku: "55ä¸‡",
                        likes: "150ä¸‡"
                    }
                }
            ],
            
            // æ¯é¡µæ˜¾ç¤ºæ•°é‡
            ITEMS_PER_PAGE: 8,
            
            // å½“å‰çŠ¶æ€
            currentPage: 1,
            currentCategory: 'all',
            currentSearch: '',
            allVideos: []
        };

        // ==================== åˆå§‹åŒ–å‡½æ•° ====================
        async function initApp() {
            // 1. åˆå§‹åŒ–ç²’å­èƒŒæ™¯
            initParticles();
            
            // 2. åŠ è½½è§†é¢‘æ•°æ®
            await loadVideos();
            
            // 3. æ¸²æŸ“åˆå§‹è§†é¢‘
            renderVideos();
            
            // 4. åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initEvents();
            
            // 5. åˆå§‹åŒ–æœç´¢å»ºè®®
            initSearchSuggestions();
        }

        // ==================== æ•°æ®åŠ è½½å‡½æ•° ====================
        async function loadVideos() {
            const loader = document.getElementById('loader');
            loader.style.display = 'block';
            
            try {
                // å°è¯•ä»APIåŠ è½½æ•°æ®
                const videos = await fetchVideosFromAPI();
                CONFIG.allVideos = videos;
            } catch (error) {
                console.warn('APIåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®:', error);
                // ä½¿ç”¨é»˜è®¤æ•°æ®
                CONFIG.allVideos = CONFIG.DEFAULT_VIDEOS;
            }
            
            loader.style.display = 'none';
        }

        async function fetchVideosFromAPI() {
            // è¿™é‡Œå¯ä»¥æ¥å…¥çœŸå®çš„API
            // ç¤ºä¾‹ï¼šä½¿ç”¨TMDB APIï¼ˆéœ€è¦ç”³è¯·API keyï¼‰
            
            // æš‚æ—¶è¿”å›é»˜è®¤æ•°æ®
            return CONFIG.DEFAULT_VIDEOS;
            
            // å®é™…APIè°ƒç”¨ç¤ºä¾‹ï¼š
            /*
            const response = await fetch(
                `${CONFIG.API_BASE}${encodeURIComponent(CONFIG.VIDEO_SOURCES.MOVIE_API)}`
            );
            const data = await response.json();
            return data.results.map(item => ({
                id: item.id,
                title: item.title,
                year: item.release_date?.split('-')[0] || 'N/A',
                rating: item.vote_average,
                type: 'movie',
                category: item.genre_ids || [],
                cover: `https://image.tmdb.org/t/p/w500${item.poster_path}`,
                description: item.overview
            }));
            */
        }

        // ==================== æ¸²æŸ“å‡½æ•° ====================
        function renderVideos() {
            const grid = document.getElementById('moviesGrid');
            const pagination = document.getElementById('pagination');
            
            // ç­›é€‰è§†é¢‘
            let filteredVideos = CONFIG.allVideos;
            
            if (CONFIG.currentCategory !== 'all') {
                filteredVideos = filteredVideos.filter(video => 
                    video.type === CONFIG.currentCategory
                );
            }
            
            if (CONFIG.currentSearch) {
                filteredVideos = filteredVideos.filter(video =>
                    video.title.toLowerCase().includes(CONFIG.currentSearch.toLowerCase()) ||
                    (video.description && video.description.toLowerCase().includes(CONFIG.currentSearch.toLowerCase()))
                );
            }
            
            // è®¡ç®—åˆ†é¡µ
            const totalPages = Math.ceil(filteredVideos.length / CONFIG.ITEMS_PER_PAGE);
            const startIdx = (CONFIG.currentPage - 1) * CONFIG.ITEMS_PER_PAGE;
            const endIdx = startIdx + CONFIG.ITEMS_PER_PAGE;
            const pageVideos = filteredVideos.slice(startIdx, endIdx);
            
            // æ¸²æŸ“è§†é¢‘ç½‘æ ¼
            grid.innerHTML = pageVideos.map(video => generateMovieCard(video)).join('');
            
            // æ¸²æŸ“åˆ†é¡µæ§ä»¶
            renderPagination(totalPages);
            
            // æ›´æ–°æ ‡é¢˜
            updateSectionTitle(filteredVideos.length);
            
            // ç»‘å®šäº‹ä»¶
            bindVideoEvents();
        }

        function generateMovieCard(video) {
            return `
                <div class="movie-card" data-id="${video.id}">
                    <img src="${video.cover || video.poster}" 
                         alt="${video.title}" 
                         class="card-img"
                         onerror="this.src='https://via.placeholder.com/400x600/0a0a0f/00d4ff?text=No+Image'">
                    <div class="card-overlay">
                        <h3 class="card-title">${video.title}</h3>
                        
                        <div class="video-tags">
                            ${video.category.map(cat => 
                                `<span class="video-tag">${cat}</span>`
                            ).join('')}
                        </div>
                        
                        <div class="video-stats">
                            <span class="stat-item">
                                <i class="far fa-calendar"></i> ${video.year}
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-star"></i> ${video.rating}
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-clock"></i> ${video.duration}
                            </span>
                        </div>
                        
                        ${video.stats ? `
                        <div class="video-stats">
                            <span class="stat-item">
                                <i class="fas fa-eye"></i> ${video.stats.views}
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-comment"></i> ${video.stats.danmaku}
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-thumbs-up"></i> ${video.stats.likes}
                            </span>
                        </div>
                        ` : ''}
                        
                        <div class="card-actions">
                            <button class="watch-btn" data-id="${video.id}">
                                <i class="fas fa-play"></i> ç«‹å³è§‚çœ‹
                            </button>
                            <button class="info-btn" data-id="${video.id}">
                                <i class="fas fa-info-circle"></i> è¯¦æƒ…
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPagination(totalPages) {
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let pagesHTML = '';
            const current = CONFIG.currentPage;
            
            // ä¸Šä¸€é¡µæŒ‰é’®
            pagesHTML += `
                <button class="page-btn" data-page="${current - 1}" 
                        ${current === 1 ? 'disabled style="opacity:0.5"' : ''}>
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;
            
            // é¡µç æŒ‰é’®
            for (let i = 1; i <= totalPages; i++) {
                if (
                    i === 1 || 
                    i === totalPages || 
                    (i >= current - 2 && i <= current + 2)
                ) {
                    pagesHTML += `
                        <button class="page-btn ${i === current ? 'active' : ''}" 
                                data-page="${i}">
                            ${i}
                        </button>
                    `;
                } else if (i === current - 3 || i === current + 3) {
                    pagesHTML += `<span class="page-btn" style="border:none;background:none">...</span>`;
                }
            }
            
            // ä¸‹ä¸€é¡µæŒ‰é’®
            pagesHTML += `
                <button class="page-btn" data-page="${current + 1}" 
                        ${current === totalPages ? 'disabled style="opacity:0.5"' : ''}>
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;
            
            pagination.innerHTML = pagesHTML;
            
            // ç»‘å®šåˆ†é¡µäº‹ä»¶
            document.querySelectorAll('#pagination .page-btn:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', () => {
                    const page = parseInt(btn.dataset.page);
                    if (page && page !== CONFIG.currentPage) {
                        CONFIG.currentPage = page;
                        renderVideos();
                        window.scrollTo({ top: 400, behavior: 'smooth' });
                    }
                });
            });
        }

        function updateSectionTitle(count) {
            const titleEl = document.querySelector('#videoContent .section-title');
            if (!titleEl) return;
            
            const typeMap = {
                'all': 'æ¨è',
                'movie': 'ç”µå½±',
                'tv': 'å‰§é›†',
                'anime': 'åŠ¨æ¼«',
                'variety': 'ç»¼è‰º'
            };
            
            const typeText = typeMap[CONFIG.currentCategory] || 'å†…å®¹';
            const searchText = CONFIG.currentSearch ? `"${CONFIG.currentSearch}" çš„æœç´¢ç»“æœ` : '';
            
            titleEl.innerHTML = `
                <i class="fas fa-${getCategoryIcon(CONFIG.currentCategory)}"></i>
                ${searchText || `çƒ­é—¨${typeText}æ¨è`}
                <span style="font-size:0.8em; color:var(--primary); margin-left:1rem;">
                    (å…± ${count} éƒ¨)
                </span>
            `;
        }

        function getCategoryIcon(category) {
            const icons = {
                'all': 'fire',
                'movie': 'film',
                'tv': 'tv',
                'anime': 'gamepad',
                'variety': 'star'
            };
            return icons[category] || 'film';
        }

        // ==================== äº‹ä»¶å¤„ç†å‡½æ•° ====================
        function initEvents() {
            // æœç´¢æŒ‰é’®
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            
            // æœç´¢è¾“å…¥æ¡†å›è½¦
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
            
            // åˆ†ç±»ç­›é€‰æŒ‰é’®
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.dataset.category;
                    setActiveCategory(category);
                });
            });
            
            // å¯¼èˆªæ åˆ†ç±»
            document.querySelectorAll('.nav-item[data-category]').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const category = item.dataset.category;
                    setActiveCategory(category);
                    
                    // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
                    document.querySelectorAll('.nav-item').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    item.classList.add('active');
                });
            });
            
            // å…³é—­æ¨¡æ€æ¡†
            document.getElementById('closeModal').addEventListener('click', closeVideoModal);
            
            // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
            document.getElementById('videoModal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) {
                    closeVideoModal();
                }
            });
            
            // ç”¨æˆ·æŒ‰é’®
            document.getElementById('userBtn').addEventListener('click', () => {
                alert(`ğŸ‘¤ ç”¨æˆ·ï¼šå¤§æµ·\nâ­ å·²è§‚çœ‹ï¼š${CONFIG.allVideos.length} éƒ¨å½±ç‰‡\n\næ¬¢è¿æ¥åˆ°æ‚¨çš„ç§äººå½±é™¢ï¼`);
            });
        }

        function initSearchSuggestions() {
            const searchInput = document.getElementById('searchInput');
            const suggestionsBox = document.getElementById('suggestionsBox');
            
            // é˜²æŠ–å¤„ç†
            let debounceTimer;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(debounceTimer);
                const query = e.target.value.trim();
                
                if (!query) {
                    suggestionsBox.style.display = 'none';
                    return;
                }
                
                debounceTimer = setTimeout(() => {
                    showSearchSuggestions(query);
                }, 300);
            });
            
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­å»ºè®®æ¡†
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    suggestionsBox.style.display = 'none';
                }
            });
            
            // è¾“å…¥æ¡†èšç„¦æ—¶æ˜¾ç¤ºå»ºè®®
            searchInput.addEventListener('focus', () => {
                if (searchInput.value.trim()) {
                    showSearchSuggestions(searchInput.value.trim());
                }
            });
        }

        async function showSearchSuggestions(query) {
            const suggestionsBox = document.getElementById('suggestionsBox');
            
            // ä»å½“å‰æ•°æ®ä¸­ç­›é€‰å»ºè®®
            const suggestions = CONFIG.allVideos.filter(video =>
                video.title.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 8);
            
            if (suggestions.length === 0) {
                suggestionsBox.innerHTML = `
                    <div class="suggestion-item">
                        <div style="padding:1rem;text-align:center;color:rgba(255,255,255,0.5);width:100%;">
                            æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è§†é¢‘
                        </div>
                    </div>
                `;
            } else {
                suggestionsBox.innerHTML = suggestions.map(video => `
                    <div class="suggestion-item" data-id="${video.id}">
                        <img src="${video.cover}" alt="${video.title}" class="suggestion-img"
                             onerror="this.src='https://via.placeholder.com/60x40/0a0a0f/00d4ff?text=Video'">
                        <div style="flex:1;">
                            <div class="suggestion-title">${video.title}</div>
                            <div style="display:flex;gap:0.5rem;margin-top:0.3rem;">
                                <span class="suggestion-type">${video.type === 'movie' ? 'ç”µå½±' : 
                                    video.type === 'tv' ? 'å‰§é›†' : 
                                    video.type === 'anime' ? 'åŠ¨æ¼«' : 'ç»¼è‰º'}</span>
                                <span style="color:rgba(255,255,255,0.5);font-size:0.8rem;">${video.year}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                // ç»‘å®šå»ºè®®é¡¹ç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('#suggestionsBox .suggestion-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const videoId = item.dataset.id;
                        const video = CONFIG.allVideos.find(v => v.id == videoId);
                        if (video) {
                            playVideo(video);
                            searchInput.value = '';
                            suggestionsBox.style.display = 'none';
                        }
                    });
                });
            }
            
            suggestionsBox.style.display = 'block';
        }

        function bindVideoEvents() {
            // æ’­æ”¾æŒ‰é’®
            document.querySelectorAll('.watch-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const videoId = btn.dataset.id;
                    const video = CONFIG.allVideos.find(v => v.id == videoId);
                    if (video) playVideo(video);
                });
            });
            
            // è¯¦æƒ…æŒ‰é’®
            document.querySelectorAll('.info-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const videoId = btn.dataset.id;
                    const video = CONFIG.allVideos.find(v => v.id == videoId);
                    if (video) showVideoInfo(video);
                });
            });
            
            // å¡ç‰‡ç‚¹å‡»
            document.querySelectorAll('.movie-card').forEach(card => {
                card.addEventListener('click', function() {
                    const videoId = this.dataset.id;
                    const video = CONFIG.allVideos.find(v => v.id == videoId);
                    if (video) showVideoInfo(video);
                });
            });
        }

        // ==================== æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ====================
        function setActiveCategory(category) {
            CONFIG.currentCategory = category;
            CONFIG.currentPage = 1;
            CONFIG.currentSearch = '';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
            
            // æ¸…ç©ºæœç´¢æ¡†
            document.getElementById('searchInput').value = '';
            
            // éšè—æœç´¢å»ºè®®
            document.getElementById('suggestionsBox').style.display = 'none';
            
            // é‡æ–°æ¸²æŸ“
            renderVideos();
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            CONFIG.currentSearch = query;
            CONFIG.currentPage = 1;
            CONFIG.currentCategory = 'all';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === 'all') {
                    btn.classList.add('active');
                }
            });
            
            // éšè—æœç´¢å»ºè®®
            document.getElementById('suggestionsBox').style.display = 'none';
            
            // é‡æ–°æ¸²æŸ“
            renderVideos();
        }

        function playVideo(video) {
            const modal = document.getElementById('videoModal');
            const titleEl = document.getElementById('modalTitle');
            const container = document.getElementById('videoContainer');
            
            titleEl.textContent = `æ­£åœ¨æ’­æ”¾ï¼š${video.title}`;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            container.innerHTML = `
                <div class="video-loading">
                    <div class="loader" style="display:block;"></div>
                    <div class="loading-text">æ­£åœ¨åŠ è½½è§†é¢‘...</div>
                </div>
            `;
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // å»¶è¿ŸåŠ è½½æ’­æ”¾å™¨ï¼Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
            setTimeout(() => {
                // ä½¿ç”¨Bç«™æ’­æ”¾å™¨åµŒå…¥
                // å®é™…å¼€å‘ä¸­ï¼Œè¿™é‡Œåº”è¯¥ä½¿ç”¨video.bvidæˆ–video.videoId
                const bvid = video.bvid || 'BV1fX4y1V7Vc'; // é»˜è®¤è§†é¢‘ID
                
                container.innerHTML = `
                    <iframe 
                        src="https://player.bilibili.com/player.html?bvid=${bvid}&autoplay=1&page=1"
                        width="100%" 
                        height="600" 
                        scrolling="no" 
                        border="0" 
                        frameborder="no" 
                        framespacing="0" 
                        allowfullscreen="true"
                        style="border-radius: 10px;"
                    >
                    </iframe>
                `;
            }, 1000);
        }

        function showVideoInfo(video) {
            const modal = document.getElementById('videoModal');
            const titleEl = document.getElementById('modalTitle');
            const container = document.getElementById('videoContainer');
            
            titleEl.textContent = video.title;
            
            container.innerHTML = `
                <div style="padding: 2rem; max-width: 800px;">
                    <div style="display: flex; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                        <img src="${video.cover || video.poster}" 
                             alt="${video.title}" 
                             style="width: 200px; height: 300px; object-fit: cover; border-radius: 10px;"
                             onerror="this.src='https://via.placeholder.com/200x300/0a0a0f/00d4ff?text=No+Image'">
                        <div style="flex: 1; min-width: 300px;">
                            <h2 style="color: var(--primary); margin-bottom: 1rem;">${video.title}</h2>
                            
                            <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                                <span style="background: rgba(0,212,255,0.1); color: var(--primary); 
                                       padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.9rem;">
                                    ${video.type === 'movie' ? 'ç”µå½±' : 
                                      video.type === 'tv' ? 'å‰§é›†' : 
                                      video.type === 'anime' ? 'åŠ¨æ¼«' : 'ç»¼è‰º'}
                                </span>
                                <span style="color: rgba(255,255,255,0.7);">
                                    <i class="far fa-calendar"></i> ${video.year}
                                </span>
                                <span style="color: rgba(255,255,255,0.7);">
                                    <i class="fas fa-star" style="color:#ffd700;"></i> ${video.rating}
                                </span>
                                <span style="color: rgba(255,255,255,0.7);">
                                    <i class="fas fa-clock"></i> ${video.duration}
                                </span>
                            </div>
                            
                            <div style="margin-bottom: 1.5rem;">
                                ${video.category.map(cat => 
                                    `<span style="background: rgba(0,212,255,0.1); color: var(--primary); 
                                        padding: 0.3rem 0.8rem; border-radius: 15px; margin-right: 0.5rem; 
                                        margin-bottom: 0.5rem; display: inline-block; font-size: 0.9rem;">
                                        ${cat}
                                    </span>`
                                ).join('')}
                            </div>
                            
                            ${video.stats ? `
                            <div style="display: flex; gap: 2rem; margin-bottom: 1.5rem; padding: 1rem; 
                                        background: rgba(0,0,0,0.3); border-radius: 10px; flex-wrap: wrap;">
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-size: 1.2rem; font-weight: bold;">${video.stats.views}</div>
                                    <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem;">æ’­æ”¾</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-size: 1.2rem; font-weight: bold;">${video.stats.danmaku}</div>
                                    <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem;">å¼¹å¹•</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-size: 1.2rem; font-weight: bold;">${video.stats.likes}</div>
                                    <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem;">ç‚¹èµ</div>
                                </div>
                            </div>
                            ` : ''}
                            
                            <p style="line-height: 1.6; color: rgba(255,255,255,0.8); margin-bottom: 2rem;">
                                ${video.description}
                            </p>
                            
                            <button class="watch-btn" 
                                    style="width: 100%; padding: 1rem; font-size: 1.1rem;"
                                    onclick="playVideo(${JSON.stringify(video).replace(/"/g, '&quot;')})">
                                <i class="fas fa-play"></i> ç«‹å³è§‚çœ‹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('videoContainer');
            
            // åœæ­¢è§†é¢‘æ’­æ”¾
            const iframe = container.querySelector('iframe');
            if (iframe) {
                iframe.src = iframe.src; // é‡æ–°åŠ è½½ä»¥åœæ­¢æ’­æ”¾
            }
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ==================== å·¥å…·å‡½æ•° ====================
        function initParticles() {
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: "#00d4ff" },
                    shape: { type: "circle" },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#00d4ff",
                        opacity: 0.2,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 2,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "repulse" },
                        onclick: { enable: true, mode: "push" }
                    }
                },
                retina_detect: true
            });
        }

        // ==================== åˆå§‹åŒ–åº”ç”¨ ====================
        document.addEventListener('DOMContentLoaded', initApp);

        // ==================== å…¨å±€å‡½æ•° ====================
        // ä¾›HTMLè°ƒç”¨çš„å…¨å±€å‡½æ•°
        window.playVideo = playVideo;
        window.closeVideoModal = closeVideoModal;
    </script>
</body>
</html>
